<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

</head>
<body onload="ready()">

<img id="dung" src="img/dung.png" style="position: absolute; left: 0; top: 0; width: 200px; height: 200px">
<img id="diep" src="img/diep.png" style="position: absolute; left: 500px; top: 0px; width: 200px; height: 200px">

<script>

    let dungImg = document.getElementById('dung');
    let diepImg = document.getElementById('diep');

    isMeetX = false;
    isMeetY = false;

    function move(e) {

        let dungX = parseInt(dungImg.style.left);
        let dungY = parseInt(dungImg.style.top);
        let diepX = parseInt(diepImg.style.left);
        let diepY = parseInt(diepImg.style.top);

        let dungH = dungX + parseInt(dungImg.style.width);
        let dungV = dungY + parseInt(dungImg.style.height);
        let diepH = diepX + parseInt(diepImg.style.width);
        let diepV = diepY + parseInt(diepImg.style.height);

        let isMeetX = dungH >= diepX && diepH >= dungX;
        let isMeetY = dungV >= diepY && diepV >= dungY;

        if (isMeetX && isMeetY) {
            meet();
            if (dungH == diepX || dungV == diepY || diepH == dungX) {
                moveLeft();
            }
            if (dungV == diepY) {
                moveUp();
            }
            if (diepH == dungX) {
                moveRight();
            }
            if (diepV == dungY) {
                moveDown();
            }
        } else {
            switch (e.keyCode) {
                case 37:
                    moveLeft();
                    break;
                case 39:
                    moveRight();
                    break;
                case 38:
                    moveUp();
                    break;
                case 40:
                    moveDown();
            }
        }

    }

    function moveLeft() {
        dungImg.style.left = parseInt(dungImg.style.left) - 10 + 'px';
    }

    function moveRight() {
        dungImg.style.left = parseInt(dungImg.style.left) + 10 + 'px';
    }

    function moveUp() {
        dungImg.style.top = parseInt(dungImg.style.top) - 10 + 'px';
    }

    function moveDown() {
        dungImg.style.top = parseInt(dungImg.style.top) + 10 + 'px';
    }

    function meet() {
        alert('Chao em');
        alert('Anh dung day tu chieu');
        dungImg.style.left = '0px';
    }

    function ready() {
        window.addEventListener('keydown', move);
    }

    let moving = true;

    function repeat() {

        if (moving) {
            diepImg.style.top = parseInt(diepImg.style.top) + 10 + 'px'
            if (parseInt(diepImg.style.top) > window.innerHeight - parseInt(diepImg.style.width)) {
                moving = false;
            }
        } else {
            diepImg.style.top = parseInt(diepImg.style.top) - 10 + 'px'
            if (parseInt(diepImg.style.top) < 0) {
                moving = true;
            }
        }
        requestAnimationFrame(repeat);
    }

    requestAnimationFrame(repeat);

</script>

</body>
</html>